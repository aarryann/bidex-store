<!DOCTYPE etl SYSTEM "http://scriptella.javaforge.com/dtd/etl.dtd">
<etl>
    <description>Imports data from FPDS exports into database</description>
    <properties>
      <include href="etl.properties"/> <!--Load from external properties file-->
    </properties>
    <!-- Connection declarations -->
    <connection id="in" driver="csv" url="../in/$FPDSIn" />
    <connection id="out" driver="$driver" url="$url" user="$user" password="$password" classpath="$classpath"/>
    <query connection-id="out">
      select uuid_generate_v4() as summaryId
      <script connection-id="out">
        INSERT INTO "Staging_Summary"( "id", "reportDate", "reportName", "loadStatus", "updatedOn")
        VALUES ( '${summaryId}', '${etl.date.today('yyyy-MM-dd HH:mm:ss.SSS')}', '$FPDSIn', 'Started', '${etl.date.today('yyyy-MM-dd HH:mm:ss.SSS')}' );
      </script>
      <query connection-id="in">
        <query connection-id="out">
          select uuid_generate_v4() as awardId
          <script connection-id="out">
            INSERT INTO public."FPDStaging_AwardDetail"(
              "id", "Staging_SummaryId", "PIID", "ReferencedIDVPIID", "IDVProgramAcronym", "DescriptionofRequirement", "LastModifiedDate", "SolicitationID", "SolicitationDate", "TransactionNumber", "ModificationNumber", "DateSigned", "EffectiveDate", "EstUltimateCompletionDate", "TypeofContract", "NAICSCode", "NAICSDescription", "PrincipalPOPCountryName", "PrincipalPOPCityName", "TypeofSetAside", "VendorName", "DUNSNumber", "ContractingAgencyID", "ContractingAgencyName", "ContractingDepartmentID", "ContractingDepartmentName", "ContractingOfficeID", "ContractingOfficeName", "ContractingOfficeRegion", "CountryWhereAwardwasIssued", "MajorCommandCode", "MajorCommandID", "MajorCommandName", "OrganizationCode", "OrganizationID", "ParentMacomCode", "SubCommand1Code", "SubCommand1ID", "SubCommand1Name", "SubCommand2Code", "SubCommand2ID", "SubCommand2Name", "SubCommand3Code", "SubCommand3ID", "SubCommand3Name", "SubCommand4Code", "SubCommand4ID", "SubCommand4Name", "PIIDAgencyID", "ReferencedIDVAgencyID", "ReferencedIDVModNumber", "LastDateToOrder", "CompletionDate", "FiscalYear", "SignedDate", "FundingAgencyID", "FundingAgencyName", "FundingDepartmentID", "FundingDepartmentName", "FundingOfficeID", "FundingOfficeName", "IsFundedbyForeignEntityCode", "IsFundedbyForeignEntityDescription", "ReasonforInterAgencyContracting", "FeeforUseofService", "Fixed", "IndividualOrderCallLimit", "LowerValue", "OrderingProcedure", "UpperValue", "WebsiteURL", "WhoCanUse", "FeePaidforUseofIDV", "TotalEstimatedOrderValue", "ProgramAcronym", "TypeofIDC", "A76ActionCode", "A76ActionDescription", "ContingencyHumanitarianPeacekeepingOperation", "ContractFinancing", "CostAccountingStandardsClauseCode", "CostAccountingStandardsClauseDescription", "CostorPricingData", "EmailAddress", "GFPCode", "GFPDescription", "InherentlyGovernmentalDescription", "InherentlyGovernmentalFunction", "LetterContractCode", "LetterContractDescription", "MajorProgram", "MultipleorSingleAwardIDV", "MultiyearContractCode", "MultiyearContractDescription", "NationalInterestAction", "NationalInterestDescription", "NumberofActions", "PerformanceBasedServiceAcquisitionCode", "PerformanceBasedServiceAcquisitionDescription", "PurchaseCardasPaymentMethodCode", "PurchaseCardasPaymentMethodDescription", "SeaTransportation", "SubcontractPlan", "TreasuryAccountSymbolAgencyIdentifier", "TreasuryAccountSymbolInitiative", "TreasuryAccountSymbolMainAccountCode", "TreasuryAccountSymbolSubAccountCode", "AdditionalReportingCode", "AdditionalReportingDescription", "ClingerCohenActCode", "ClingerCohenActDescription", "ConstructionWageRateRequirementsCode", "ConstructionWageRateRequirementsDescription", "EconomyAct", "InteragencyContractingAuthorityCode", "InteragencyContractingAuthorityDescription", "LaborStandardsDescription", "LaborStandardsCode", "MaterialsSuppliesArticlesEquipCode", "MaterialsSuppliesArticlesEquipDescription", "OtherStatutoryAuthorityDescription", "BundledContractCode", "BundledContractDescription", "ClaimantProgramCode", "ConsolidatedContractCode", "ConsolidatedContractDescription", "DODAcquisitionProgram", "DomesticorForeignEntityCode", "DomesticorForeignEntityDescription", "IDVNAICSCode", "IDVNAICSDescription", "InfoTechCommercialItemCategory", "PrincipalNAICSSourceCode", "PrincipalNAICSSourceDescription", "ProductorServiceCode", "ProductorServiceDescription", "Sustainability", "SustainabilityDescription", "UseofEPADesignatedProducts", "CongressionalDistrictPOP", "POPZipCode", "PrincipalPOPCountryCode", "PrincipalPOPCountyCode", "PrincipalPOPCountyName", "PrincipalPOPLocationCode", "PrincipalPOPStateCode", "CountryofProductorServiceOriginCode", "PlaceofManufacture", "PlaceofManufactureDescription", "AlternativeAdvertising", "CommercialItemAcquisitionProceduresCode", "CommercialItemAcquisitionProceduresDescription", "EvaluatedPreference", "ExtentCompeted", "LimitedSources", "FedBizOppsCode", "FedBizOppsDescription", "IDVNumberofOffers", "IDVTypeofSetAsideCode", "IDVTypeofSetAsideDescription", "LocalAreaSetAsideCode", "LocalAreaSetAsideDescription", "NumberofOffersReceived", "NumberofOffersSourceCode", "NumberofOffersSourceDescription", "OtherThanFullandOpenCompetition", "PreAwardFBOSynopsis", "PriceEvaluationPercentDifference", "SBAorOFPPSynopsisWaiverPilot", "SBIRSTTR", "SimplifiedProceduresforCertainCommercialItems", "SimplifiedProceduresforCertainCommercialItemsDescription", "SmallBusinessCompetitivenessDemonstrationProgram", "SolicitationProcedures", "TypeofSetAsideSource", "TypeofSetAsideSourceDescription", "ApprovedBy", "ApprovedDate", "AwardorIDVType", "ClosedBy", "ClosedStatus", "ClosedStatusDate", "CreatedVia", "LastModifiedBy", "Part8OrPart13", "PreparedBy", "PreparedDate", "ReasonForModificationCode", "ReasonForModificationDescription", "COBusinessSizeSelectionSource", "COBusinessSizeSelectionSourceDescription", "COBusinessSizeSelection", "IDVCOBusinessSizeSelection", "IDVCOBusinessSizeSelectionDescription", "ReasonNotAwardedToSmallBusiness", "ReasonNotAwardedToSDB", "IDVBundledRequirements", "IDVContractingAgencyID", "IDVContractingAgencyName", "IDVCOsBusinessSizeSelection", "IDVDepartmentID", "IDVDepartmentName", "IDVMajorProgramCode", "IDVMultipleOrSingleAwardIDV", "ReferencedIDVNAICSCode", "ReferencedIDVNAICSDescription", "IDVPart8OrPart13", "IDVReferencedIDVAgencyCode", "IDVReferencedIDVPIID", "IDVSubcontractPlan", "IDVSubcontractPlanDescription", "IDVType", "IDVTypeOfContractPricing", "IDVTypeOfContractPricingDescription", "IDVTypeOfIDC", "IDVTypeOfIDCDescription", "IDVWhoCanUse", "IDVWhoCanUseDescription", "BaseandExercisedOptionsValue", "ActionObligation", "TCV", "Actions", "NumberofRecords" )
              VALUES ('${awardId}', '${summaryId}', ?1, ?2, ?3, ?4, ?5, ?6, ?7, ?8, ?9, ?10, ?11, ?12, ?13, ?14, ?15, ?16, ?17, ?18, ?19, ?20, ?21, ?22, ?23, ?24, ?25, ?26, ?27, ?28, ?29, ?30, ?31, ?32, ?33, ?34, ?35, ?36, ?37, ?38, ?39, ?40, ?41, ?42, ?43, ?44, ?45, ?46, ?47, ?48, ?49, ?50, ?51, ?52, ?53, ?54, ?55, ?56, ?57, ?58, ?59, ?60, ?61, ?62, ?63, ?64, ?65, ?66, ?67, ?68, ?69, ?70, ?71, ?72, ?73, ?74, ?75, ?76, ?77, ?78, ?79, ?80, ?81, ?82, ?83, ?84, ?85, ?86, ?87, ?88, ?89, ?90, ?91, ?92, ?93, ?94, ?95, ?96, ?97, ?98, ?99, ?100, ?101, ?102, ?103, ?104, ?105, ?106, ?107, ?108, ?109, ?110, ?111, ?112, ?113, ?114, ?115, ?116, ?117, ?118, ?119, ?120, ?121, ?122, ?123, ?124, ?125, ?126, ?127, ?128, ?129, ?130, ?131, ?132, ?133, ?134, ?135, ?136, ?137, ?138, ?139, ?140, ?141, ?142, ?143, ?144, ?145, ?146, ?147, ?148, ?149, ?150, ?151, ?152, ?153, ?154, ?155, ?156, ?157, ?158, ?159, ?160, ?161, ?162, ?163, ?164, ?165, ?166, ?167, ?168, ?169, ?170, ?171, ?172, ?173, ?174, ?175, ?176, ?177, ?178, ?179, ?180, ?181, ?182, ?183, ?184, ?185, ?186, ?187, ?291, ?292, ?293, ?294, ?295, ?296, ?297, ?298, ?299, ?300, ?301, ?302, ?303, ?304, ?305, ?306, ?307, ?308, ?309, ?310, ?311, ?312, ?313, ?314, ?315, ?316, ?317, ?318, ?319, ?320, ?321, ?322, ?323, ?324 );

            INSERT INTO public."FPDStaging_VendorDetail"(
              "Staging_AwardDetailId", "CAGECode", "CongressionalDistrictContractor", "ContractorName", "DoingBusinessAsName", "GlobalDUNSNumber", "GlobalVendorName", "SAMException", "Street", "Street2", "VendorCity", "VendorCountry", "VendorPhoneNumber", "VendorState", "Zip", "IsVendor1862LandGrantCollege", "IsVendor1890LandGrantCollege", "IsVendor1994LandGrantCollege", "IsVendorAirportAuthority", "IsVendorAlaskanNativeCorporationOwnedFirm", "IsVendorAlaskanNativeServicingInstitution", "IsVendorAllAwards", "IsVendorAmericanIndianOwned", "IsVendorAsianPacificAmericanOwned", "IsVendorBlackAmericanOwned", "IsVendorCity", "IsVendorCommunityDevelopedCorporationOwnedFirm", "IsVendorCommunityDevelopmentCorporation", "IsVendorContracts", "IsVendorCorporateEntityNotTaxExempt", "IsVendorCorporateEntityTaxExempt", "IsVendorCouncilOfGovernments", "IsVendorCountryOfIncorporation", "IsVendorCounty", "IsVendorDomesticShelter", "IsVendorDoTCertifiedDBE", "IsVendorEDWOSB", "IsVendorEducationalInstitution", "IsVendorEmergingSmallBusiness", "IsVendorFederalAgency", "IsVendorFederalAssistanceAwards", "IsVendorFFRDC", "IsVendorForProfitOrganization", "IsVendorForeignGovernment", "IsVendorForeignOwned", "IsVendorFoundation", "IsVendorHispanicAmericanOwned", "IsVendorHispanicServicingInstitution", "ISVendorHBCU", "IsVendorHospital", "IsVendorHousingAuthoritiesPublicorTribal", "IsVendorIndianTribe", "IsVendorInterMunicipal", "IsVendorInternationalOrganization", "IsVendorInterstateEntity", "IsVendorJVEDWOSB", "IsVendorJVWOSB", "IsVendorLaborSurplusAreaFirm", "IsVendorLimitedLiabilityCorporation", "IsVendorLocalGovernmentOwned", "IsVendorManufacturerOfGoods", "IsVendorMinorityInstitutions", "IsVendorMinorityOwnedBusiness", "IsVendorMunicipality", "IsVendorNativeAmericanOwned", "IsVendorNativeHawaiianOrganizationOwnedFirm", "IsVendorNativeHawaiianServicingInstitution", "IsVendorNonProfitOrganization", "IsVendorOtherMinorityOwned", "IsVendorOtherNotForProfitOrganization", "IsVendorPartnershiporLLP", "IsVendorPlanningCommission", "IsVendorPortAuthority", "IsVendorPrivateUniversityOrCollege", "IsVendorSBACertified8aJV", "IsVendorSBACertified8aProgramParticipant", "IsVendorSBACertifiedHubZonefirm", "IsVendorSBACertifiedSDB", "IsVendorSchoolDistrict", "IsVendorSchoolOfForestry", "IsVendorSelfCertifiedHUBZoneJV", "IsVendorSelfCertifedSDB", "IsVendorSDVOB", "IsVendorSmallAgriculturalCooperative", "IsVendorSoleProprietorship", "IsVendorStateControlledIHL", "IsVendorStateOfIncorporation", "IsVendorSubchapterSCorporation", "IsVendorSubcontinentAsianAmericanOwned", "IsVendorTheAbilityOneProgram", "IsVendorTownship", "IsVendorTransitAuthority", "IsVendorTribalCollege", "IsVendorTriballyOwned", "IsVendorUSFederalGovernment", "IsVendorUSGovernmentEntity", "IsVendorUSLocalGovernment", "IsVendorUSStateGovernment", "IsVendorUSTribalGovernment", "IsVendorVeteranOwnedBusiness", "IsVendorVeterinaryCollege", "IsVendorVeterinaryHospital", "IsVendorWomanOwnedBusiness", "IsVendorWomenOwnedSmallBusiness" )
              VALUES ('${awardId}', ?188, ?189, ?190, ?191, ?192, ?193, ?194, ?195, ?196, ?197, ?198, ?199, ?200, ?201, ?202, ?203, ?204, ?205, ?206, ?207, ?208, ?209, ?210, ?211, ?212, ?213, ?214, ?215, ?216, ?217, ?218, ?219, ?220, ?221, ?222, ?223, ?224, ?225, ?226, ?227, ?228, ?229, ?230, ?231, ?232, ?233, ?234, ?235, ?236, ?237, ?238, ?239, ?240, ?241, ?242, ?243, ?244, ?245, ?246, ?247, ?248, ?249, ?250, ?251, ?252, ?253, ?254, ?255, ?256, ?257, ?258, ?259, ?260, ?261, ?262, ?263, ?264, ?265, ?266, ?267, ?268, ?269, ?270, ?271, ?272, ?273, ?274, ?275, ?276, ?277, ?278, ?279, ?280, ?281, ?282, ?283, ?284, ?285, ?286, ?287, ?288, ?289, ?290 );

          </script>
        </query>    
      </query>    
    </query>
</etl>
